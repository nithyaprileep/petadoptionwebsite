{% extends 'Owner_App/ownerbase.html' %}
{% load static %}

{% block title %}Edit Pet{% endblock %}

{% block content %}


<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-body p-4">

                    <!-- Title -->
                    <h3 class="fw-bold text-center mb-4">
                        üêæ Add New Pet
                    </h3>

                    <!-- Success / Error Messages -->
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-success">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}

                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
<label class="form-label">Category</label>
<select name="category" id="categorySelect"
        class="form-select" required>
    <option value="">-- Select Category --</option>
    {% for cat in categories %}
        <option value="{{ cat.id }}">{{ cat.name }}</option>
    {% endfor %}
</select>

                        <!-- Category & Breed -->
                        <!-- <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Category</label>
                                <select name="category" class="form-select" required>
                                    <option value="">Select Category</option>
                                    {% for cat in categories %}
                                        <option value="{{ cat.id }}">{{ cat.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Breed</label>
                                <select name="breed" class="form-select">
                                    <option value="">Select Breed (optional)</option>
                                    {% for breed in breeds %}
                                        <option value="{{ breed.id }}">{{ breed.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div> -->
                        <label class="form-label">Breed</label>
<select name="breed" id="breedSelect" class="form-select" onchange="toggleCustomBreed()" required>
    <option value="">-- Select Breed --</option>
    {% for breed in breeds %}
        <option value="{{ breed.id }}">{{ breed.name }}</option>
    {% endfor %}
    <option value="other">Other (Not listed)</option>
</select>

<div class="mt-2 d-none" id="customBreedDiv">
    <input type="text"
           name="custom_breed"
           class="form-control"
           placeholder="Enter breed name">
</div>

<script>
function toggleCustomBreed() {
    const breedSelect = document.getElementById("breedSelect");
    const customDiv = document.getElementById("customBreedDiv");

    if (breedSelect.value === "other") {
        customDiv.classList.remove("d-none");
    } else {
        customDiv.classList.add("d-none");
    }
}
</script>


                        <!-- Name & Age -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Pet Name</label>
                                <input type="text" name="name"
                                       class="form-control"
                                       placeholder="Enter pet name" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Age</label>
                                <input type="text" name="age"
                                       class="form-control"
                                       placeholder="e.g. 2 years">
                            </div>
                        </div>

                        <!-- Gender & Colour -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Gender</label>
                                <select name="gender" class="form-select" required>
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label">Colour</label>
                                <input type="text" name="colour"
                                       class="form-control"
                                       placeholder="e.g. Brown">
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea name="description"
                                      class="form-control"
                                      rows="3"
                                      placeholder="About the pet"></textarea>
                        </div>

                        <!-- Photo -->
                        <div class="mb-4">
                            <label class="form-label">Pet Photo</label>
                            <input type="file" name="photo"
                                   class="form-control" required>
                        </div>

                        <!-- Buttons -->
                        <div class="d-flex justify-content-between">
                            <a href="{% url 'owner_dashboard' %}"
                               class="btn btn-outline-secondary px-4">
                                ‚¨Ö Cancel
                            </a>

                            <button type="submit"
                                    class="btn btn-primary px-5">
                                ‚ûï Add Pet
                            </button>
                        </div>

                        <!-- Approval Info -->
                        <p class="text-muted text-center mt-3 small">
                            ‚è≥ Pet will be visible after admin approval
                        </p>

                    </form>

                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}